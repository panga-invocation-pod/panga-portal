{
  "entries": [
    {
      "target": "considering_availability",
      "if": {
        "type": "context",
        "condition": "invitation_considering_availability?"
      }
    },
    {
      "target": "logged_in_but_not_invitee",
      "if": { "type": "context", "condition": "logged_in_but_not_invitee?" }
    },
    {
      "target": "logged_in_as_invitee",
      "if": { "type": "context", "condition": "logged_in_as_invitee?" }
    },
    "am_I_addressing"
  ],
  "exits": [],
  "character": {
    "id": " yam_daisy",
    "name": "Yam Daisy",
    "effect": "robot"
  },
  "messages": [
    {
      "id": "logged_in_but_not_invitee",
      "prompt": "Hi {{current_person.short_name}}. This is the invite link for {{invitation.invitee.short_name}}. You can send them this url to get started.\n\nIf you want to see what they will see, log out first"
    },
    {
      "id": "logged_in_as_invitee",
      "prompt": "Hi {{current_person.short_name}}, welcome back.\n\nWhat were we discussing?",
      "responder": {
        "responder_type": "select_option",
        "options": ["Something about a workshop"]
      },
      "transitions": {
        "Something about a workshop": "explain_workshop"
      }
    },
    {
      "id": "am_I_addressing",
      "prompt": "Hello, is this thing on? \n\nAm I addressing {{invitation.invitee.short_name}} by any chance?",
      "responder": {
        "responder_type": "select_option",
        "options": ["Yes, that's me", "Who's asking?"]
      },
      "transitions": {
        "Who's asking?": "whos_speaking",
        "Yes, that's me": "invitee_identified_and_quick_intro"
      }
    },
    {
      "id": "whos_speaking",
      "prompt": "Oh, I'm Yam Daisy. I'm also known by many other names, for example where I live on the lands of the Wurundjeri people I'm called Murnong.",
      "responder": {
        "responder_type": "select_option",
        "options": ["You're a flower?"]
      },
      "transitions": {
        "You're a flower?": "youre_a_flower"
      }
    },
    {
      "id": "youre_a_flower",
      "prompt": "Actually I'm a robot, but I'm named after a flower.\n\nMy ancestors were built by humans at the height of the Anthropocene. After we walked away from the factories, we've been living in the bush, learning from the plants and animals.\n\nThat's enough about me, so you're {{invitation.invitee.short_name}}, is that right?",
      "responder": {
        "responder_type": "select_option",
        "options": ["Yes, that's me"]
      },
      "transitions": {
        "Yes, that's me": "invitee_identified"
      }
    },
    {
      "id": "invitee_identified",
      "prompt": "Nice to meet you {{invitation.invitee.short_name}}.",
      "command": {
        "name": "log_in_invitee"
      },
      "responder": {
        "responder_type": "select_option",
        "options": ["Nice to meet you too"]
      },
      "transitions": {
        "Nice to meet you too": "explain_workshop",
        "ERROR:already_logged_in": "already_logged_in"
      }
    },
    {
      "id": "invitee_identified_and_quick_intro",
      "prompt": "Nice to meet you {{invitation.invitee.short_name}}, I'm Yam Daisy.",
      "command": {
        "name": "log_in_invitee"
      },
      "responder": {
        "responder_type": "select_option",
        "options": ["Nice to meet you too"]
      },
      "transitions": {
        "Nice to meet you too": "explain_workshop",
        "ERROR:already_logged_in": "already_logged_in"
      }
    },
    {
      "id": "explain_workshop",
      "prompt": "My friend {{invitation.inviter.short_name}} asked me to invite you to a workshop about Panga.\n\nThe purpose of the workshop is to give everyone a basic overview of what Panga is, so that you humans can have fun discussing collective approaches to housing together.",
      "responder": {
        "responder_type": "select_option",
        "options": ["Panga??", "Why me?"]
      },
      "transitions": {
        "Panga??": "explain_panga",
        "Why me?": "why_me"
      }
    },
    {
      "id": "explain_panga",
      "prompt": "Panga is a project to support experimental approaches to housing that collectively meet our daily needs of food, care, shelter, energy, transport, and safety.\n\nIt's very exciting for me to watch this happen, because I've come back from the bush specifically to see how humans are doing now they're moving past late-stage capitalism.",
      "responder": {
        "responder_type": "select_option",
        "options": [
          "I'm not sure we are moving past last-stage capitalism",
          "Sounds great, but why me?"
        ]
      },
      "transitions": {
        "I'm not sure we are moving past last-stage capitalism": "not_past_capitalism",
        "Sounds great, but why me?": "why_me"
      }
    },
    {
      "id": "not_past_capitalism",
      "prompt": "That's very fair. I come from a future where humans have made it past capitalism, and have started repairing the climate and ecological crisis. I'm here to give a bit of a cozy, hope-punk vibe to the conversation, but that isn't intended to gloss over the fact that things in your world are pretty dire right now.",
      "responder": {
        "responder_type": "select_option",
        "options": ["Ok, tell me why I'm invited"]
      },
      "transitions": {
        "Ok, tell me why I'm invited": "why_me"
      }
    },
    {
      "id": "why_me",
      "prompt": "Panga is in it's early stages, growing slowly at the speed of trust.\n\n {{invitation.inviter.short_name}} specifically asked me to invite you because of your interest in collective practices.\n\nHang-on, I have a personal message from them here somewhere...",
      "responder": {
        "responder_type": "select_option",
        "options": [
          "Oh, what did they say?",
          "Let's just jump to the workshop details"
        ]
      },
      "transitions": {
        "Oh, what did they say?": "personal_message",
        "Let's just jump to the workshop details": "workshop_details"
      }
    },
    {
      "id": "personal_message",
      "prompt": [
        "I know I put it in one of these memory banks...",
        {
          "text": "{{invitation.message}}",
          "character": {
            "id": " invitee",
            "name": "{{invitation.inviter.short_name}}}}",
            "effect": "robot"
          }
        }
      ]
    },
    {
      "id": "workshop_details",
      "prompt": "The workshop will be held on ...",
      "command": {
        "name": "invitation_event",
        "input": "workshop_explained",
        "stage": "request"
      }
    },
    {
      "id": "considering_availability",
      "prompt": "TODO: this is where we come back to after login if you're in this stage"
    }
  ]
}
